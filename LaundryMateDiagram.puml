@startuml LaundryMate_Container
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

AddContainerTag("frontend", $bgColor="#4A90E2", $fontColor="White")
AddContainerTag("backend", $bgColor="#50E3C2", $fontColor="Black")
AddContainerTag("infra", $bgColor="#FFDDC1", $fontColor="Black")
AddContainerTag("external-ai", $bgColor="#F5F5A5", $fontColor="Black")

' Force top-down layout
LAYOUT_TOP_DOWN()

Person(user, "User", "User of the mobile app")

System_Boundary(laundrymate, "LaundryMate System") {
  
  ' Row 1: Frontend
  Container(mobile, "Mobile App", "React Native + Expo", "User interface", "frontend")
  
  ' Row 2: Backend
  Container(api, "Backend API", "Django REST", "Image processing endpoints", "backend")
  
  ' Row 3: Infrastructure Services (side by side)
  Container(auth, "Firebase Auth", "Authentication", "User login", "infra")
  Container(db, "Firestore", "NoSQL DB", "User data", "infra")
  
  ' Row 4: AI Services (side by side)
  Container(yolo, "YOLOv8n", "Local Model", "Symbol detection", "external-ai")
  Container(gemini, "Gemini API", "LLM", "Daily tips", "external-ai")
}

' Relationships - vertical flow
Rel_Down(user, mobile, "Uses")
Rel_Down(mobile, api, "Sends images", "HTTPS")

' Backend to Infrastructure
Rel(api, auth, "Verifies")
Rel(api, db, "Stores")

' Backend to AI
Rel_Down(api, yolo, "Process image")
Rel_Down(api, gemini, "Get tips")

' Mobile to Infrastructure  
Rel(mobile, auth, "Login")
Rel(mobile, db, "Read data")

@enduml